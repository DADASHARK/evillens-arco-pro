# EvilLens 前端配置文档
## 项目概述
EvilLens 是一个儿童邪典视频挖掘治理平台，基于 Arco Design Pro Vue 框架开发。本文档提供前端项目的配置和开发指南。

## 环境要求
- Node.js ==18.19.0
- 包管理工具：npm==9.5.1
- git version 2.48.1.windows.1
## 项目结构
```plaintext
evillens-arco-pro/
├── config/                 # 项目配置文件
├── public/                 # 静态资源
├── src/                    # 源代码
│   ├── api/                # API 接口定义
│   ├── assets/             # 项目资源文件
│   ├── components/         # 公共组件
│   ├── hooks/              # Vue Hooks
│   ├── locale/             # 国际化配置
│   ├── mock/               # 模拟数据
│   ├── router/             # 路由配置
│   ├── store/              # 状态管理
│   ├── utils/              # 工具函数
│   ├── views/              # 页面组件
│   ├── App.vue             # 根组件
│   └── main.ts             # 入口文件
├── .env.development        # 开发环境配置
├── .env.production         # 生产环境配置
├── .eslintignore           # ESLint 忽略配置
├── .eslintrc.js            # ESLint 配置
├── .gitignore              # Git 忽略配置
├── .prettierignore         # Prettier 忽略配置
├── .prettierrc.js          # Prettier 配置
├── .stylelintrc.js         # Stylelint 配置
├── babel.config.js         # Babel 配置
├── commitlint.config.js    # Commit 规范配置
├── package.json            # 项目依赖
├── tsconfig.json           # TypeScript 配置
└── vite.config.ts          # Vite 配置
```
### 开发环境部署

开始开发之前，请确认本地环境中安装好了 `node`， `git` 和 `arco cli`

其中 `arco cli` 是安装项目模版的工具，请运行以下命令安装：

```lang
npm i -g arco-cli
```

安装包管理依赖：

```lang
npm install
```

以 Arco Design Pro 为模版创建一个新的项目，请按照以下步骤进行：

- 进入到一个文件夹，新建项目

```lang
cd someDir
arco init evillens-arco-pro
```

- 选择 技术栈

```lang
 ? 请选择你希望使用的技术栈
   React
 ❯ Vue
```

- 选择 `arco-design-pro` 分类

```lang
 ? 请选择一个分类
   业务组件
   组件库
   Lerna Menorepo 项目
 ❯ Arco Pro 项目
```

将我们的前端文件夹evillens-arco-pro替换新建的文件内内容即可

### 开发环境运行

进入目录，运行下面的命令：

```bash
npm run dev
```

即可打开前端。

## 环境配置
### 开发环境 (.env.development)
```plaintext
VITE_API_BASE_URL= 'http://localhost:8080'
```
```

### 生产环境 (.env.production)
根据实际部署环境配置 API 基础 URL。

## 代码规范
项目使用 ESLint、Prettier 和 Stylelint 进行代码规范检查和格式化。

### ESLint 配置
项目使用 Airbnb JavaScript 风格指南，并结合 TypeScript 和 Vue 3 的推荐规则。详细配置见 .eslintrc.js 。

### Prettier 配置
```js
module.exports = {
  tabWidth: 2,
  semi: true,
  printWidth: 80,
  singleQuote: true,
  quoteProps: 'consistent',
  htmlWhitespaceSensitivity: 'strict',
  vueIndentScriptAndStyle: true,
};
```
```

### Stylelint 配置
项目使用 stylelint-config-standard、stylelint-config-rational-order 等配置，详细配置见 .stylelintrc.js 。

## 项目依赖
### 核心依赖
- Vue 3
- Vue Router 4
- Pinia (状态管理)
- Arco Design Vue (UI 组件库)
- TypeScript
- Vite (构建工具)
### 图表和数据可视化
- ECharts
- D3.js
- Vue-ECharts
### 工具库
- Axios (HTTP 请求)
- Dayjs (日期处理)
- Lodash (工具函数)
- Sortablejs (拖拽排序)
## 常见修改点
根据 readme.md 文件中的注释，以下是常见的修改点：

1. 页面左侧导航栏更改代码： src/locale/zh-CN.ts
2. 默认端口号： .env.development
3. 热力图刷新时间： src/views/visualization/multi-dimension-data-analysis/components/data-overview.vue
4. 风险值刷新时间： src/components/navbar/index.vue
5. 修改导航栏： src/router/routes/modules/
6. 更改导航栏显示上下顺序： src/router/routes/modules/dashboard.ts
## 特殊功能模块
### 视频扩展网络
位置： src/views/dashboard/monitor/components/video-expansion-network.vue

该组件实现了视频关联扩展的可视化网络图，使用 D3.js 力导向图实现。

### 地理位置热力图
位置： src/views/visualization/multi-dimension-data-analysis/components/data-overview.vue

### 用户画像分析
位置：

- src/views/visualization/multi-dimension-data-analysis/components/content-publishing-source.vue
- src/api/visualization.ts
## Git 提交规范
项目使用 Husky 和 CommitLint 强制执行 Git 提交规范，遵循 Conventional Commits 规范。

提交前会自动运行 lint-staged，对暂存的文件进行代码规范检查和格式化。

## 构建优化
项目使用以下插件优化构建：

- vite-plugin-compression：生成 gzip 压缩文件
- vite-plugin-imagemin：图片压缩
- rollup-plugin-visualizer：构建分析报告
## 注意事项
1. 封装可能存在问题的文件： src/utils/env.ts
2. 确保在修改后恢复错误提示： src/api/interceptor.ts
## 搜索历史数据
项目包含搜索历史数据文件 search_history.json ，用于分析和展示用户搜索行为。

## 浏览器兼容性
项目使用 Babel 和 TypeScript 确保代码兼容性，目标为 ES2020。

## 更多资源
- Arco Design Vue 文档
- Vue 3 文档
- Vite 文档