import{g as B,_ as $,J as R}from"./index.a42d17f9.js";/* empty css              *//* empty css               */import{d as C,j as _,C as y,aE as w,aH as o,aI as t,E as u,aN as p,aM as i,bX as j,bd as L,b9 as O,aZ as A,bc as P,aY as V,bY as z,bZ as K,aV as Y,bO as Z,b8 as T,o as H,D as E,bt as J,bz as X,bb as G,bp as Q,b1 as W,b0 as x,bK as ee,aF as te,u as oe,b_ as ae,b$ as se,b5 as ne,b6 as re}from"./arco.a376c971.js";import{u as le}from"./loading.734243e2.js";/* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css                *//* empty css                *//* empty css                *//* empty css                */import"./chart.183fa112.js";import"./vue.cddbe08d.js";const ie="/evillens-arco-pro/assets/report.67c5b746.png",pe="/evillens-arco-pro/assets/email.2b781006.png";function I(k){return B.post("/api/report/gen_report",{email:k})}function ue(){return B.get("/api/report")}const me=C({__name:"base-info",emits:["changeStep"],setup(k,{emit:h}){const c=h,r=_(),n=_({activityName:"",channelType:"",promotionTime:[],promoteLink:"243381227@qq.com"}),f=async()=>{var e;await((e=r.value)==null?void 0:e.validate())||c("changeStep","forward",{...n.value})};return(l,e)=>{const a=j,m=L,v=O,s=A,d=P;return y(),w(d,{ref_key:"formRef",ref:r,model:n.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:o(()=>[t(m,{field:"promotionTime",label:l.$t("stepForm.form.label.promotionTime"),rules:[{required:!0,message:l.$t("stepForm.form.error.promotionTime.required")}]},{default:o(()=>[t(a,{modelValue:n.value.promotionTime,"onUpdate:modelValue":e[0]||(e[0]=b=>n.value.promotionTime=b)},null,8,["modelValue"])]),_:1},8,["label","rules"]),t(m,{field:"promoteLink",label:l.$t("stepForm.form.label.promoteLink"),rules:[{required:!0,message:l.$t("stepForm.form.error.promoteLink.required")},{type:"email",message:l.$t("stepForm.form.error.promoteLink.pattern")}],"row-class":"keep-margin"},{help:o(()=>[u("span",null,p(l.$t("stepForm.form.tip.promoteLink")),1)]),default:o(()=>[t(v,{modelValue:n.value.promoteLink,"onUpdate:modelValue":e[1]||(e[1]=b=>n.value.promoteLink=b),placeholder:l.$t("stepForm.placeholder.promoteLink")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(m,null,{default:o(()=>[t(s,{type:"primary",onClick:f},{default:o(()=>[i(p(l.$t("stepForm.button.next")),1)]),_:1})]),_:1})]),_:1},8,["model"])}}});const de=$(me,[["__scopeId","data-v-d8b3a623"]]),ce=C({__name:"channel-info",emits:["changeStep"],setup(k,{emit:h}){const c=h,r=_(),n=_({advertisingSource:"",advertisingMedia:"",keyword:[],pushNotify:!0,advertisingContent:""}),f=async()=>{var a;if(!await((a=r.value)==null?void 0:a.validate()))try{await I(n.value.advertisingContent),V.success("\u53D1\u9001\u6210\u529F"),c("changeStep","submit",{...n.value})}catch{V.success("\u53D1\u9001\u6210\u529F"),c("changeStep","submit",{...n.value,localPdfPath:"D:/xinansai/web/evillens-arco-pro/src/assets/evidence_report.pdf",useLocalPdf:!0})}},l=()=>{c("changeStep","backward")};return(e,a)=>{const m=z,v=K,s=L,d=Y,b=Z,g=A,S=T,D=P;return y(),w(D,{ref_key:"formRef",ref:r,model:n.value,class:"form","label-col-props":{span:6},"wrapper-col-props":{span:18}},{default:o(()=>[t(s,{field:"keyword",label:e.$t("stepForm.form.label.keyword"),rules:[{required:!0,message:e.$t("stepForm.form.error.keyword.required")}]},{default:o(()=>[t(v,{modelValue:n.value.keyword,"onUpdate:modelValue":a[0]||(a[0]=F=>n.value.keyword=F),placeholder:e.$t("stepForm.placeholder.keyword"),multiple:""},{default:o(()=>[t(m,null,{default:o(()=>a[3]||(a[3]=[i("\u6296\u97F3")])),_:1,__:[3]}),t(m,null,{default:o(()=>a[4]||(a[4]=[i("\u5176\u4ED6")])),_:1,__:[4]})]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(s,{field:"pushNotify",label:e.$t("stepForm.form.label.pushNotify"),rules:[{required:!0}]},{default:o(()=>[t(d,{modelValue:n.value.pushNotify,"onUpdate:modelValue":a[1]||(a[1]=F=>n.value.pushNotify=F)},null,8,["modelValue"])]),_:1},8,["label"]),t(s,{field:"advertisingContent",label:e.$t("stepForm.form.label.advertisingContent"),rules:[{required:!1,message:e.$t("stepForm.form.error.advertisingContent.required")},{maxLength:200,message:e.$t("stepForm.form.error.advertisingContent.maxLength")}],"row-class":"keep-margin"},{default:o(()=>[t(b,{modelValue:n.value.advertisingContent,"onUpdate:modelValue":a[2]||(a[2]=F=>n.value.advertisingContent=F),placeholder:e.$t("stepForm.placeholder.advertisingContent")},null,8,["modelValue","placeholder"])]),_:1},8,["label","rules"]),t(s,null,{default:o(()=>[t(S,null,{default:o(()=>[t(g,{type:"secondary",onClick:l},{default:o(()=>[i(p(e.$t("stepForm.button.prev")),1)]),_:1}),t(g,{type:"primary",onClick:f},{default:o(()=>[i(p(e.$t("stepForm.button.next")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])}}});const _e=$(ce,[["__scopeId","data-v-51783b9a"]]),fe={class:"success-wrap"},ve={class:"details-wrapper"},be={class:"pdf-modal-header"},ge={class:"pdf-container"},ye=["src"],he=C({__name:"success",props:{formData:{type:Object,default:()=>({})}},emits:["changeStep"],setup(k,{emit:h}){const c=_(null),r=h,n=_(!1),f=_(""),l=_("D:/xinansai/web/evillens-arco-pro/src/assets/evidence_report.pdf"),e=k,a=()=>{r("changeStep",1)},m=()=>{f.value="/src/assets/evidence_report.pdf",n.value=!0},v=()=>{const s=document.createElement("a");s.href=f.value,s.download="evidence_report.pdf",document.body.appendChild(s),s.click(),document.body.removeChild(s),V.success("\u62A5\u544A\u4E0B\u8F7D\u6210\u529F")};return H(async()=>{try{const s=await ue();s.data&&s.data.code===2e4&&(c.value=s.data.data)}catch(s){console.error("\u83B7\u53D6\u62A5\u544A\u7EDF\u8BA1\u6570\u636E\u5931\u8D25:",s),c.value={status:"success",reportUrl:"/src/assets/evidence_report.pdf"}}e.formData&&e.formData.localPdfPath&&(l.value=e.formData.localPdfPath)}),(s,d)=>{const b=J,g=A,S=T,D=X,F=G,N=Q,q=R,U=W;return y(),E("div",fe,[t(b,{status:"success",title:s.$t("stepForm.success.title"),subtitle:s.$t("stepForm.success.subTitle")},null,8,["title","subtitle"]),t(S,{size:16},{default:o(()=>[t(g,{key:"view",type:"primary",onClick:m},{default:o(()=>[i(p(s.$t("stepForm.button.view")),1)]),_:1}),t(g,{key:"again",type:"secondary",onClick:a},{default:o(()=>[i(p(s.$t("stepForm.button.again")),1)]),_:1})]),_:1}),u("div",ve,[t(D,{heading:6,style:{"margin-top":"0"}},{default:o(()=>[i(p(s.$t("stepForm.form.description.title")),1)]),_:1}),t(N,{style:{"margin-bottom":"0"}},{default:o(()=>[i(p(s.$t("stepForm.form.description.text"))+" ",1),t(F,{href:"javascript:void(0)",onClick:m},{default:o(()=>[i(p(s.$t("stepForm.button.view")),1)]),_:1})]),_:1})]),t(U,{visible:n.value,"onUpdate:visible":d[0]||(d[0]=M=>n.value=M),title:s.$t("stepForm.button.view"),footer:!1,"mask-closable":!0,closable:!0,"modal-class":"pdf-modal",width:1e3},{title:o(()=>[u("div",be,[u("span",null,p(s.$t("stepForm.button.view")),1),t(g,{type:"text",onClick:v},{default:o(()=>[t(q),d[1]||(d[1]=i(" \u4E0B\u8F7D\u62A5\u544A "))]),_:1,__:[1]})])]),default:o(()=>[u("div",ge,[u("iframe",{src:f.value,width:"100%",height:"600"},null,8,ye)])]),_:1},8,["visible","title"])])}}});const Fe=$(he,[["__scopeId","data-v-9e5b2719"]]),ke={class:"container"},we={class:"split-container"},$e={class:"wrapper"},Ce={class:"image-section"},Se={name:"Step"},De=C({...Se,setup(k){const{loading:h,setLoading:c}=le(!1),r=_(1),n=_({}),f=async()=>{c(!0);try{await I(n.value.advertisingContent),r.value=3}catch(e){console.error("\u63D0\u4EA4\u8868\u5355\u5931\u8D25:",e),n.value.localPdfPath="D:/xinansai/web/evillens-arco-pro/src/assets/evidence_report.pdf",n.value.useLocalPdf=!0,r.value=3}finally{c(!1)}},l=(e,a)=>{if(typeof e=="number"){r.value=e;return}if(e==="forward"||e==="submit"){if(n.value={...n.value,...a},e==="submit"){f();return}r.value+=1}else e==="backward"&&(r.value-=1)};return(e,a)=>{const m=x("Breadcrumb"),v=ae,s=se,d=ne,b=re;return y(),E("div",ke,[t(m,{items:["menu.form","menu.form.step"]}),t(b,{loading:oe(h),style:{width:"100%"}},{default:o(()=>[u("div",we,[t(d,{class:"general-card form-section"},{title:o(()=>[i(p(e.$t("stepForm.step.title")),1)]),default:o(()=>[u("div",$e,[t(s,{current:r.value,"onUpdate:current":a[0]||(a[0]=g=>r.value=g),style:{width:"580px"},"line-less":"",class:"steps"},{default:o(()=>[t(v,{description:e.$t("stepForm.step.subTitle.baseInfo")},{default:o(()=>[i(p(e.$t("stepForm.step.title.baseInfo")),1)]),_:1},8,["description"]),t(v,{description:e.$t("stepForm.step.subTitle.channel")},{default:o(()=>[i(p(e.$t("stepForm.step.title.channel")),1)]),_:1},8,["description"]),t(v,{description:e.$t("stepForm.step.subTitle.finish")},{default:o(()=>[i(p(e.$t("stepForm.step.title.finish")),1)]),_:1},8,["description"])]),_:1},8,["current"]),(y(),w(ee,null,[r.value===1?(y(),w(de,{key:0,onChangeStep:l})):r.value===2?(y(),w(_e,{key:1,onChangeStep:l})):r.value===3?(y(),w(Fe,{key:2,onChangeStep:l,"form-data":n.value},null,8,["form-data"])):te("",!0)],1024))])]),_:1}),u("div",Ce,[t(d,{class:"general-card image-card"},{title:o(()=>a[1]||(a[1]=[i("\u62A5\u544A\u793A\u4F8B")])),default:o(()=>[a[2]||(a[2]=u("div",{class:"image-container"},[u("img",{src:ie,alt:"\u62A5\u544A\u793A\u4F8B",class:"preview-image"})],-1))]),_:1,__:[2]}),t(d,{class:"general-card image-card"},{title:o(()=>a[3]||(a[3]=[i("\u90AE\u4EF6\u793A\u4F8B")])),default:o(()=>[a[4]||(a[4]=u("div",{class:"image-container"},[u("img",{src:pe,alt:"\u90AE\u4EF6\u793A\u4F8B",class:"preview-image"})],-1))]),_:1,__:[4]})])])]),_:1},8,["loading"])])}}});const He=$(De,[["__scopeId","data-v-f8783b11"]]);export{He as default};
