import{Q as Nt,_ as ct}from"./index.5ca91c64.js";import{u as dt}from"./index.06011eb5.js";import{d as ot,j as G,b0 as ht,C as j,aE as at,aH as F,aI as C,G as Ht,E as Z,aM as K,aN as J,u as N,aF as Xt,bU as Yt,bm as Vt,bN as lt,bs as ft,c7 as It,c8 as Bt,ba as kt,o as Zt,b as Ut,D as jt,bb as Kt}from"./arco.b6188ad8.js";/* empty css                *//* empty css                */import{u as Jt}from"./themes.5da99dc6.js";/* empty css               *//* empty css               *//* empty css               *//* empty css               *//* empty css                */import{u as st,q as Qt,T as te,a as ee,g as ae}from"./echarts.2aa50981.js";/* empty css               */import{k as oe,l as re,S as ne,m as ie,Z as se,n as Ct,o as le,r as ue,p as ce,q as de,s as Mt,t as he,v as fe,w as pe,x as ge,y as me,z as Dt,A as ve}from"./chart.7ad290e3.js";import"./vue.ef909a42.js";import"@/views/visualization/data-analysis/mock";import"@/views/visualization/multi-dimension-data-analysis/mock";import"@/views/user/info/mock";import"@/views/user/setting/mock";const we={class:"content-wrap"},ye={class:"content"},_e={class:"desc"},xe={class:"chart"},Ce=ot({__name:"chain-item",props:{title:{type:String,default:""},quota:{type:String,default:""},chartType:{type:String,default:""},cardStyle:{type:Object,default:()=>({})}},setup(u){const r=()=>{const y=G([]),{chartOption:M}=st(()=>({grid:{left:0,right:0,top:10,bottom:0},xAxis:{type:"category",show:!1},yAxis:{show:!1},tooltip:{show:!0,trigger:"axis"},series:{name:"total",data:y,type:"bar",barWidth:7,itemStyle:{borderRadius:2}}}));return{data:y,chartOption:M}},a=()=>{const y=G([[],[]]),{chartOption:M}=st(()=>({grid:{left:0,right:0,top:10,bottom:0},xAxis:{type:"category",show:!1},yAxis:{show:!1},tooltip:{show:!0,trigger:"axis"},series:[{name:"2001",data:y.value[0],type:"line",showSymbol:!1,smooth:!0,lineStyle:{color:"#165DFF",width:3}},{name:"2002",data:y.value[1],type:"line",showSymbol:!1,smooth:!0,lineStyle:{color:"#6AA1FF",width:3,type:"dashed"}}]}));return{data:y,chartOption:M}},i=()=>{const y=G([]),{chartOption:M}=st(()=>({grid:{left:0,right:0,top:0,bottom:0},legend:{show:!0,top:"center",right:"0",orient:"vertical",icon:"circle",itemWidth:6,itemHeight:6,textStyle:{color:"#4E5969"}},tooltip:{show:!0},series:[{name:"\u603B\u8BA1",type:"pie",radius:["50%","70%"],label:{show:!1},data:y}]}));return{data:y,chartOption:M}},t=u,{loading:f,setLoading:c}=dt(!0),{chartOption:o,data:d}=a(),{chartOption:n,data:I}=r(),{chartOption:L,data:E}=i(),g=G({count:0,growth:0,chartData:[]}),T=G({});return(async y=>{try{const{data:M}=await Qt(y);g.value=M;const{chartData:R}=M;t.chartType==="bar"?(R.forEach((P,X)=>{I.value.push({value:P.y,itemStyle:{color:X%2?"#2CAB40":"#86DF6C"}})}),T.value=n.value):t.chartType==="line"?(R.forEach(P=>{P.name==="2021"?d.value[0].push(P.y):d.value[1].push(P.y)}),T.value=o.value):(R.forEach(P=>{E.value.push(P)}),T.value=L.value)}catch{}finally{c(!1)}})({quota:t.quota}),(y,M)=>{const R=Yt,P=Vt,X=Nt,rt=ht("Chart"),nt=lt,Q=ft;return j(),at(Q,{loading:N(f),style:{width:"100%"}},{default:F(()=>[C(nt,{bordered:!1,style:Ht(u.cardStyle)},{default:F(()=>[Z("div",we,[Z("div",ye,[C(R,{title:u.title,value:g.value.count,"value-from":0,animation:"","show-group-separator":""},null,8,["title","value"]),Z("div",_e,[C(P,{type:"secondary",class:"label"},{default:F(()=>[K(J(y.$t("dataAnalysis.card.yesterday")),1)]),_:1}),C(P,{type:"danger"},{default:F(()=>[K(J(g.value.growth)+" ",1),C(X)]),_:1})])]),Z("div",xe,[N(f)?Xt("",!0):(j(),at(rt,{key:0,option:T.value},null,8,["option"]))])])]),_:1},8,["style"])]),_:1},8,["loading"])}}});const Et=ct(Ce,[["__scopeId","data-v-7d5636d8"]]),Ee=ot({__name:"public-opinion",setup(u){const{isDark:r}=Jt();return(a,i)=>{const t=It,f=Bt,c=lt;return j(),at(c,{class:"general-card",title:a.$t("dataAnalysis.title.publicOpinion"),"header-style":{paddingBottom:"12px"}},{default:F(()=>[C(f,{cols:18,"col-gap":12,"row-gap":12},{default:F(()=>[C(t,{span:{xs:12,sm:12,md:12,lg:12,xl:6,xxl:6}},{default:F(()=>[C(Et,{title:a.$t("dataAnalysis.card.title.allVisitors"),quota:"visitors","chart-type":"line","card-style":{background:N(r)?"linear-gradient(180deg, #284991 0%, #122B62 100%)":"linear-gradient(180deg, #f2f9fe 0%, #e6f4fe 100%)"}},null,8,["title","card-style"])]),_:1}),C(t,{span:{xs:12,sm:12,md:12,lg:12,xl:6,xxl:6}},{default:F(()=>[C(Et,{title:a.$t("dataAnalysis.card.title.contentPublished"),quota:"published","chart-type":"bar","card-style":{background:N(r)?" linear-gradient(180deg, #3D492E 0%, #263827 100%)":"linear-gradient(180deg, #F5FEF2 0%, #E6FEEE 100%)"}},null,8,["title","card-style"])]),_:1}),C(t,{span:{xs:12,sm:12,md:12,lg:12,xl:6,xxl:6}},{default:F(()=>[C(Et,{title:a.$t("dataAnalysis.card.title.totalShare"),quota:"share","chart-type":"pie","card-style":{background:N(r)?"linear-gradient(180deg, #312565 0%, #201936 100%)":"linear-gradient(180deg, #F7F7FF 0%, #ECECFF 100%)"}},null,8,["title","card-style"])]),_:1})]),_:1})]),_:1},8,["title"])}}}),Se=ot({__name:"content-period-analysis",setup(u){const r=G([]),a=G([]),{loading:i,setLoading:t}=dt(!0),{chartOption:f}=st(o=>({grid:{left:"40",right:0,top:"20",bottom:"100"},legend:{bottom:0,icon:"circle",textStyle:{color:"#4E5969"}},xAxis:{type:"category",data:r.value,boundaryGap:!1,axisLine:{lineStyle:{color:o?"#3f3f3f":"#A9AEB8"}},axisTick:{show:!0,alignWithLabel:!0,lineStyle:{color:"#86909C"}},axisLabel:{color:"#86909C"}},yAxis:{type:"value",axisLabel:{color:"#86909C",formatter:"{value}"},splitLine:{lineStyle:{color:o?"#3F3F3F":"#E5E6EB"}}},tooltip:{show:!0,trigger:"axis",formatter(d){const[n]=d;return`
          <div>
            <p class="tooltip-title">${n.axisValueLabel}</p>
            <div class="content-panel">
              <p>
                <span style="background-color: ${n.color}" class="tooltip-item-icon"></span>
                <span>${n.seriesName}</span>
              </p>
              <span class="tooltip-value">${n.value}</span>
            </div>
          </div>`},className:"echarts-tooltip-diy"},series:[{name:"\u89C6\u9891\u6570\u91CF",data:a.value,type:"line",smooth:!0,showSymbol:!1,color:o?"#6CAAF5":"#81E2FF",symbol:"circle",symbolSize:10,emphasis:{focus:"series",itemStyle:{borderWidth:2,borderColor:"#D9F6FF"}}}],dataZoom:[{bottom:40,type:"slider",left:40,right:14,height:14,borderColor:"transparent",handleIcon:"image://http://p3-armor.byteimg.com/tos-cn-i-49unhts6dw/1ee5a8c6142b2bcf47d2a9f084096447.svg~tplv-49unhts6dw-image.image",handleSize:"20",handleStyle:{shadowColor:"rgba(0, 0, 0, 0.2)",shadowBlur:4},brushSelect:!1,backgroundColor:o?"#313132":"#F2F3F5"},{type:"inside",start:0,end:100,zoomOnMouseWheel:!1}]}));return(async()=>{t(!0);try{const d=(await te()).data;r.value=d.map(n=>`${n.hour.toString().padStart(2,"0")}:00`),a.value=d.map(n=>n.count)}catch(o){console.error("\u83B7\u53D6\u6570\u636E\u5931\u8D25:",o)}finally{t(!1)}})(),(o,d)=>{const n=ht("Chart"),I=lt,L=ft;return j(),at(L,{loading:N(i),style:{width:"100%"}},{default:F(()=>[C(I,{class:"general-card","header-style":{paddingBottom:"16px"}},{title:F(()=>[K(J(o.$t("dataAnalysis.contentPeriodAnalysis")),1)]),default:F(()=>[C(n,{style:{width:"100%",height:"370px"},option:N(f)},null,8,["option"])]),_:1})]),_:1},8,["loading"])}}});const be=ct(Se,[["__scopeId","data-v-9eda95aa"]]),Fe=ot({__name:"content-publish-ratio",setup(u){const{loading:r,setLoading:a}=dt(!0),i=G([]),t=G([]),f=d=>d.map(n=>`<div class="content-panel">
      <p>
        <span style="background-color: ${n.color}" class="tooltip-item-icon"></span>
        <span>${n.seriesName}</span>
      </p>
      <span class="tooltip-value">${Number(n.value).toLocaleString()}</span>
    </div>`).join(""),{chartOption:c}=st(d=>({grid:{left:"4%",right:0,top:"20",bottom:"60"},legend:{bottom:0,icon:"circle",textStyle:{color:"#4E5969"}},xAxis:{type:"category",data:i.value,axisLine:{lineStyle:{color:d?"#3f3f3f":"#A9AEB8"}},axisTick:{show:!0,alignWithLabel:!0,lineStyle:{color:"#86909C"}},axisLabel:{color:"#86909C"}},yAxis:{type:"value",axisLabel:{color:"#86909C",formatter(n){return n.toString()}},splitLine:{lineStyle:{color:d?"#3F3F3F":"#E5E6EB"}}},tooltip:{show:!0,trigger:"axis",formatter(n){const[I]=n;return`<div>
            <p class="tooltip-title">${I.axisValueLabel}</p>
            ${f(n)}
          </div>`},className:"echarts-tooltip-diy"},series:[{name:"\u5185\u5BB9\u6570\u91CF",data:t.value,type:"bar",color:d?"#01349F":"#81E2FF",itemStyle:{borderRadius:2}}]}));return(async()=>{a(!0);try{const{data:d}=await ee();console.log("",d),i.value=d.map(n=>n.date),t.value=d.map(n=>n.count)}catch(d){console.error("\u6570\u636E\u83B7\u53D6\u5931\u8D25",d)}finally{a(!1)}})(),(d,n)=>{const I=kt,L=ht("Chart"),E=lt,g=ft;return j(),at(g,{loading:N(r),style:{width:"100%"}},{default:F(()=>[C(E,{class:"general-card","header-style":{paddingBottom:"14px"}},{title:F(()=>[K(J(d.$t("dataAnalysis.contentPublishRatio")),1)]),extra:F(()=>[C(I,null,{default:F(()=>[K(J(d.$t("workplace.viewMore")),1)]),_:1})]),default:F(()=>[C(L,{style:{width:"100%",height:"347px"},option:N(c)},null,8,["option"])]),_:1})]),_:1},8,["loading"])}}});oe({type:"series.wordCloud",visualStyleAccessPath:"textStyle",visualStyleMapper:function(u){return{fill:u.get("color")}},visualDrawType:"fill",optionUpdated:function(){var u=this.option;u.gridSize=Math.max(Math.floor(u.gridSize),4)},getInitialData:function(u,r){var a=re(u.data,{coordDimensions:["value"]}),i=new ne(a,this);return i.initData(u.data),i},defaultOption:{maskImage:null,shape:"circle",keepAspect:!1,left:"center",top:"center",width:"70%",height:"80%",sizeRange:[12,60],rotationRange:[-90,90],rotationStep:45,gridSize:8,drawOutOfBound:!1,shrinkToFit:!1,textStyle:{fontWeight:"normal"}}});ie({type:"wordCloud",render:function(u,r,a){var i=this.group;i.removeAll();var t=u.getData(),f=u.get("gridSize");u.layoutInstance.ondraw=function(c,o,d,n){var I=t.getItemModel(d),L=I.getModel("textStyle"),E=new se({style:Ct(L),scaleX:1/n.info.mu,scaleY:1/n.info.mu,x:(n.gx+n.info.gw/2)*f,y:(n.gy+n.info.gh/2)*f,rotation:n.rot});E.setStyle({x:n.info.fillTextOffsetX,y:n.info.fillTextOffsetY+o*.5,text:c,verticalAlign:"middle",fill:t.getItemVisual(d,"style").fill,fontSize:o}),i.add(E),t.setItemGraphicEl(d,E),E.ensureState("emphasis").style=Ct(I.getModel(["emphasis","textStyle"]),{state:"emphasis"}),E.ensureState("blur").style=Ct(I.getModel(["blur","textStyle"]),{state:"blur"}),le(E,I.get(["emphasis","focus"]),I.get(["emphasis","blurScope"])),E.stateTransition={duration:u.get("animation")?u.get(["stateAnimation","duration"]):0,easing:u.get(["stateAnimation","easing"])},E.__highDownDispatcher=!0},this._model=u},remove:function(){this.group.removeAll(),this._model.layoutInstance.dispose()},dispose:function(){this._model.layoutInstance.dispose()}});/*!
 * wordcloud2.js
 * http://timdream.org/wordcloud2.js/
 *
 * Copyright 2011 - 2019 Tim Guan-tin Chien and contributors.
 * Released under the MIT license
 */window.setImmediate||(window.setImmediate=function(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||function(){if(!window.postMessage||!window.addEventListener)return null;var a=[void 0],i="zero-timeout-message",t=function(c){var o=a.length;return a.push(c),window.postMessage(i+o.toString(36),"*"),o};return window.addEventListener("message",function(c){if(!(typeof c.data!="string"||c.data.substr(0,i.length)!==i)){c.stopImmediatePropagation();var o=parseInt(c.data.substr(i.length),36);!a[o]||(a[o](),a[o]=void 0)}},!0),window.clearImmediate=function(c){!a[c]||(a[c]=void 0)},t}()||function(a){window.setTimeout(a,0)}}());window.clearImmediate||(window.clearImmediate=function(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function(a){window.clearTimeout(a)}}());var bt=function(){var r=document.createElement("canvas");if(!r||!r.getContext)return!1;var a=r.getContext("2d");return!(!a||!a.getImageData||!a.fillText||!Array.prototype.some||!Array.prototype.push)}(),St=function(){if(!!bt){for(var r=document.createElement("canvas").getContext("2d"),a=20,i,t;a;){if(r.font=a.toString(10)+"px sans-serif",r.measureText("\uFF37").width===i&&r.measureText("m").width===t)return a+1;i=r.measureText("\uFF37").width,t=r.measureText("m").width,a--}return 0}}(),Te=function(u){if(Array.isArray(u)){var r=u.slice();return r.splice(0,2),r}else return[]},Ae=function(r){for(var a,i,t=r.length;t;)a=Math.floor(Math.random()*t),i=r[--t],r[t]=r[a],r[a]=i;return r},et={},pt=function(r,a){if(!bt)return;var i=Math.floor(Math.random()*Date.now());Array.isArray(r)||(r=[r]),r.forEach(function(v,e){if(typeof v=="string"){if(r[e]=document.getElementById(v),!r[e])throw new Error("The element id specified is not found.")}else if(!v.tagName&&!v.appendChild)throw new Error("You must pass valid HTML elements, or ID of the element.")});var t={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "\u5FAE\u8EDF\u6B63\u9ED1\u9AD4", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:"normal",color:"random-dark",minSize:0,weightFactor:1,clearCanvas:!0,backgroundColor:"#fff",gridSize:8,drawOutOfBound:!1,shrinkToFit:!1,origin:null,drawMask:!1,maskColor:"rgba(255,0,0,0.3)",maskGapWidth:.3,layoutAnimation:!0,wait:0,abortThreshold:0,abort:function(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationStep:.1,shuffle:!0,rotateRatio:.1,shape:"circle",ellipticity:.65,classes:null,hover:null,click:null};if(a)for(var f in a)f in t&&(t[f]=a[f]);if(typeof t.weightFactor!="function"){var c=t.weightFactor;t.weightFactor=function(e){return e*c}}if(typeof t.shape!="function")switch(t.shape){case"circle":default:t.shape="circle";break;case"cardioid":t.shape=function(e){return 1-Math.sin(e)};break;case"diamond":t.shape=function(e){var s=e%(2*Math.PI/4);return 1/(Math.cos(s)+Math.sin(s))};break;case"square":t.shape=function(e){return Math.min(1/Math.abs(Math.cos(e)),1/Math.abs(Math.sin(e)))};break;case"triangle-forward":t.shape=function(e){var s=e%(2*Math.PI/3);return 1/(Math.cos(s)+Math.sqrt(3)*Math.sin(s))};break;case"triangle":case"triangle-upright":t.shape=function(e){var s=(e+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(s)+Math.sqrt(3)*Math.sin(s))};break;case"pentagon":t.shape=function(e){var s=(e+.955)%(2*Math.PI/5);return 1/(Math.cos(s)+.726543*Math.sin(s))};break;case"star":t.shape=function(e){var s=(e+.955)%(2*Math.PI/10);return(e+.955)%(2*Math.PI/5)-2*Math.PI/10>=0?1/(Math.cos(2*Math.PI/10-s)+3.07768*Math.sin(2*Math.PI/10-s)):1/(Math.cos(s)+3.07768*Math.sin(s))};break}t.gridSize=Math.max(Math.floor(t.gridSize),4);var o=t.gridSize,d=o-t.maskGapWidth,n=Math.abs(t.maxRotation-t.minRotation),I=Math.min(t.maxRotation,t.minRotation),L=t.rotationStep,E,g,T,H,y,M,R;function P(v,e){return"hsl("+(Math.random()*360).toFixed()+","+(Math.random()*30+70).toFixed()+"%,"+(Math.random()*(e-v)+v).toFixed()+"%)"}switch(t.color){case"random-dark":R=function(){return P(10,50)};break;case"random-light":R=function(){return P(50,90)};break;default:typeof t.color=="function"&&(R=t.color);break}var X;typeof t.fontWeight=="function"&&(X=t.fontWeight);var rt=null;typeof t.classes=="function"&&(rt=t.classes);var nt=!1,Q=[],gt,Ft=function(e){var s=e.currentTarget,l=s.getBoundingClientRect(),p,h;e.touches?(p=e.touches[0].clientX,h=e.touches[0].clientY):(p=e.clientX,h=e.clientY);var m=p-l.left,D=h-l.top,_=Math.floor(m*(s.width/l.width||1)/o),x=Math.floor(D*(s.height/l.height||1)/o);return Q[_]?Q[_][x]:null},Tt=function(e){var s=Ft(e);if(gt!==s){if(gt=s,!s){t.hover(void 0,void 0,e);return}t.hover(s.item,s.dimension,e)}},mt=function(e){var s=Ft(e);!s||(t.click(s.item,s.dimension,e),e.preventDefault())},vt=[],Ot=function(e){if(vt[e])return vt[e];var s=e*8,l=s,p=[];for(e===0&&p.push([H[0],H[1],0]);l--;){var h=1;t.shape!=="circle"&&(h=t.shape(l/s*2*Math.PI)),p.push([H[0]+e*h*Math.cos(-l/s*2*Math.PI),H[1]+e*h*Math.sin(-l/s*2*Math.PI)*t.ellipticity,l/s*2*Math.PI])}return vt[e]=p,p},wt=function(){return t.abortThreshold>0&&new Date().getTime()-M>t.abortThreshold},Lt=function(){return t.rotateRatio===0||Math.random()>t.rotateRatio?0:n===0?I:I+Math.round(Math.random()*n/L)*L},zt=function(e,s,l,p){var h=t.weightFactor(s);if(h<=t.minSize)return!1;var m=1;h<St&&(m=function(){for(var xt=2;xt*h<St;)xt+=2;return xt}());var D;X?D=X(e,s,h,p):D=t.fontWeight;var _=document.createElement("canvas"),x=_.getContext("2d",{willReadFrequently:!0});x.font=D+" "+(h*m).toString(10)+"px "+t.fontFamily;var z=x.measureText(e).width/m,S=Math.max(h*m,x.measureText("m").width,x.measureText("\uFF37").width)/m,b=z+S*2,k=S*3,W=Math.ceil(b/o),$=Math.ceil(k/o);b=W*o,k=$*o;var B=-z/2,w=-S*.4,A=Math.ceil((b*Math.abs(Math.sin(l))+k*Math.abs(Math.cos(l)))/o),O=Math.ceil((b*Math.abs(Math.cos(l))+k*Math.abs(Math.sin(l)))/o),q=O*o,tt=A*o;_.setAttribute("width",q),_.setAttribute("height",tt),x.scale(1/m,1/m),x.translate(q*m/2,tt*m/2),x.rotate(-l),x.font=D+" "+(h*m).toString(10)+"px "+t.fontFamily,x.fillStyle="#000",x.textBaseline="middle",x.fillText(e,B*m,(w+h*.5)*m);var ut=x.getImageData(0,0,q,tt).data;if(wt())return!1;for(var At=[],U=O,V,yt,_t,Y=[A/2,O/2,A/2,O/2];U--;)for(V=A;V--;){_t=o;t:for(;_t--;)for(yt=o;yt--;)if(ut[((V*o+_t)*q+(U*o+yt))*4+3]){At.push([U,V]),U<Y[3]&&(Y[3]=U),U>Y[1]&&(Y[1]=U),V<Y[0]&&(Y[0]=V),V>Y[2]&&(Y[2]=V);break t}}return{mu:m,occupied:At,bounds:Y,gw:O,gh:A,fillTextOffsetX:B,fillTextOffsetY:w,fillTextWidth:z,fillTextHeight:S,fontSize:h}},Wt=function(e,s,l,p,h){for(var m=h.length;m--;){var D=e+h[m][0],_=s+h[m][1];if(D>=g||_>=T||D<0||_<0){if(!t.drawOutOfBound)return!1;continue}if(!E[D][_])return!1}return!0},Rt=function(e,s,l,p,h,m,D,_,x,z){var S=l.fontSize,b;R?b=R(p,h,S,m,D,z):b=t.color;var k;X?k=X(p,h,S,z):k=t.fontWeight;var W;rt?W=rt(p,h,S,z):W=t.classes,r.forEach(function($){if($.getContext){var B=$.getContext("2d"),w=l.mu;B.save(),B.scale(1/w,1/w),B.font=k+" "+(S*w).toString(10)+"px "+t.fontFamily,B.fillStyle=b,B.translate((e+l.gw/2)*o*w,(s+l.gh/2)*o*w),_!==0&&B.rotate(-_),B.textBaseline="middle",B.fillText(p,l.fillTextOffsetX*w,(l.fillTextOffsetY+S*.5)*w),B.restore()}else{var A=document.createElement("span"),O="";O="rotate("+-_/Math.PI*180+"deg) ",l.mu!==1&&(O+="translateX(-"+l.fillTextWidth/4+"px) scale("+1/l.mu+")");var q={position:"absolute",display:"block",font:k+" "+S*l.mu+"px "+t.fontFamily,left:(e+l.gw/2)*o+l.fillTextOffsetX+"px",top:(s+l.gh/2)*o+l.fillTextOffsetY+"px",width:l.fillTextWidth+"px",height:l.fillTextHeight+"px",lineHeight:S+"px",whiteSpace:"nowrap",transform:O,webkitTransform:O,msTransform:O,transformOrigin:"50% 40%",webkitTransformOrigin:"50% 40%",msTransformOrigin:"50% 40%"};b&&(q.color=b),A.textContent=p;for(var tt in q)A.style[tt]=q[tt];if(x)for(var ut in x)A.setAttribute(ut,x[ut]);W&&(A.className+=W),$.appendChild(A)}})},Pt=function(e,s,l,p,h){if(!(e>=g||s>=T||e<0||s<0)){if(E[e][s]=!1,l){var m=r[0].getContext("2d");m.fillRect(e*o,s*o,d,d)}nt&&(Q[e][s]={item:h,dimension:p})}},$t=function(e,s,l,p,h,m){var D=h.occupied,_=t.drawMask,x;_&&(x=r[0].getContext("2d"),x.save(),x.fillStyle=t.maskColor);var z;if(nt){var S=h.bounds;z={x:(e+S[3])*o,y:(s+S[0])*o,w:(S[1]-S[3]+1)*o,h:(S[2]-S[0]+1)*o}}for(var b=D.length;b--;){var k=e+D[b][0],W=s+D[b][1];k>=g||W>=T||k<0||W<0||Pt(k,W,_,z,m)}_&&x.restore()},qt=function v(e,s){if(s>20)return null;var l,p,h;Array.isArray(e)?(l=e[0],p=e[1]):(l=e.word,p=e.weight,h=e.attributes);var m=Lt(),D=Te(e),_=zt(l,p,m,D);if(!_||wt())return!1;if(!t.drawOutOfBound&&!t.shrinkToFit){var x=_.bounds;if(x[1]-x[3]+1>g||x[2]-x[0]+1>T)return!1}for(var z=y+1,S=function($){var B=Math.floor($[0]-_.gw/2),w=Math.floor($[1]-_.gh/2),A=_.gw,O=_.gh;return Wt(B,w,A,O,_.occupied)?(Rt(B,w,_,l,p,y-z,$[2],m,h,D),$t(B,w,A,O,_,e),{gx:B,gy:w,rot:m,info:_}):!1};z--;){var b=Ot(y-z);t.shuffle&&(b=[].concat(b),Ae(b));for(var k=0;k<b.length;k++){var W=S(b[k]);if(W)return W}}return t.shrinkToFit?(Array.isArray(e)?e[1]=e[1]*3/4:e.weight=e.weight*3/4,v(e,s+1)):null},it=function(e,s,l){if(s)return!r.some(function(p){var h=new CustomEvent(e,{detail:l||{}});return!p.dispatchEvent(h)},this);r.forEach(function(p){var h=new CustomEvent(e,{detail:l||{}});p.dispatchEvent(h)},this)},Gt=function(){var e=r[0];if(e.getContext)g=Math.ceil(e.width/o),T=Math.ceil(e.height/o);else{var s=e.getBoundingClientRect();g=Math.ceil(s.width/o),T=Math.ceil(s.height/o)}if(!!it("wordcloudstart",!0)){H=t.origin?[t.origin[0]/o,t.origin[1]/o]:[g/2,T/2],y=Math.floor(Math.sqrt(g*g+T*T)),E=[];var l,p,h;if(!e.getContext||t.clearCanvas)for(r.forEach(function(w){if(w.getContext){var A=w.getContext("2d");A.fillStyle=t.backgroundColor,A.clearRect(0,0,g*(o+1),T*(o+1)),A.fillRect(0,0,g*(o+1),T*(o+1))}else w.textContent="",w.style.backgroundColor=t.backgroundColor,w.style.position="relative"}),l=g;l--;)for(E[l]=[],p=T;p--;)E[l][p]=!0;else{var m=document.createElement("canvas").getContext("2d");m.fillStyle=t.backgroundColor,m.fillRect(0,0,1,1);var D=m.getImageData(0,0,1,1).data,_=e.getContext("2d").getImageData(0,0,g*o,T*o).data;l=g;for(var x,z;l--;)for(E[l]=[],p=T;p--;){z=o;t:for(;z--;)for(x=o;x--;)for(h=4;h--;)if(_[((p*o+z)*g*o+(l*o+x))*4+h]!==D[h]){E[l][p]=!1;break t}E[l][p]!==!1&&(E[l][p]=!0)}_=m=D=void 0}if(t.hover||t.click){for(nt=!0,l=g+1;l--;)Q[l]=[];t.hover&&e.addEventListener("mousemove",Tt),t.click&&(e.addEventListener("click",mt),e.addEventListener("touchstart",mt),e.addEventListener("touchend",function(w){w.preventDefault()}),e.style.webkitTapHighlightColor="rgba(0, 0, 0, 0)"),e.addEventListener("wordcloudstart",function w(){e.removeEventListener("wordcloudstart",w),e.removeEventListener("mousemove",Tt),e.removeEventListener("click",mt),gt=void 0})}h=0;var S,b,k=!0;t.layoutAnimation?t.wait!==0?(S=window.setTimeout,b=window.clearTimeout):(S=window.setImmediate,b=window.clearImmediate):(S=function(w){w()},b=function(){k=!1});var W=function(A,O){r.forEach(function(q){q.addEventListener(A,O)},this)},$=function(A,O){r.forEach(function(q){q.removeEventListener(A,O)},this)},B=function w(){$("wordcloudstart",w),b(et[i])};W("wordcloudstart",B),et[i]=(t.layoutAnimation?S:setTimeout)(function w(){if(!!k){if(h>=t.list.length){b(et[i]),it("wordcloudstop",!1),$("wordcloudstart",B),delete et[i];return}M=new Date().getTime();var A=qt(t.list[h],0),O=!it("wordclouddrawn",!0,{item:t.list[h],drawn:A});if(wt()||O){b(et[i]),t.abort(),it("wordcloudabort",!1),it("wordcloudstop",!1),$("wordcloudstart",B);return}h++,et[i]=S(w,t.wait)}},t.wait)}};Gt()};pt.isSupported=bt;pt.minFontSize=St;if(!pt.isSupported)throw new Error("Sorry your browser not support wordCloud");function Me(u){for(var r=u.getContext("2d"),a=r.getImageData(0,0,u.width,u.height),i=r.createImageData(a),t=0,f=0,c=0;c<a.data.length;c+=4){var o=a.data[c+3];if(o>128){var d=a.data[c]+a.data[c+1]+a.data[c+2];t+=d,++f}}for(var n=t/f,c=0;c<a.data.length;c+=4){var d=a.data[c]+a.data[c+1]+a.data[c+2],o=a.data[c+3];o<128||d>n?(i.data[c]=0,i.data[c+1]=0,i.data[c+2]=0,i.data[c+3]=0):(i.data[c]=255,i.data[c+1]=255,i.data[c+2]=255,i.data[c+3]=255)}r.putImageData(i,0,0)}ue(function(u,r){u.eachSeriesByType("wordCloud",function(a){var i=fe(a.getBoxLayoutParams(),{width:r.getWidth(),height:r.getHeight()}),t=a.get("keepAspect"),f=a.get("maskImage"),c=f?f.width/f.height:1;t&&De(i,c);var o=a.getData(),d=document.createElement("canvas");d.width=i.width,d.height=i.height;var n=d.getContext("2d");if(f)try{n.drawImage(f,0,0,d.width,d.height),Me(d)}catch(y){console.error("Invalid mask image"),console.error(y.toString())}var I=a.get("sizeRange"),L=a.get("rotationRange"),E=o.getDataExtent("value"),g=Math.PI/180,T=a.get("gridSize");pt(d,{list:o.mapArray("value",function(y,M){var R=o.getItemModel(M);return[o.getName(M),R.get("textStyle.fontSize",!0)||pe(y,E,I),M]}).sort(function(y,M){return M[1]-y[1]}),fontFamily:a.get("textStyle.fontFamily")||a.get("emphasis.textStyle.fontFamily")||u.get("textStyle.fontFamily"),fontWeight:a.get("textStyle.fontWeight")||a.get("emphasis.textStyle.fontWeight")||u.get("textStyle.fontWeight"),gridSize:T,ellipticity:i.height/i.width,minRotation:L[0]*g,maxRotation:L[1]*g,clearCanvas:!f,rotateRatio:1,rotationStep:a.get("rotationStep")*g,drawOutOfBound:a.get("drawOutOfBound"),shrinkToFit:a.get("shrinkToFit"),layoutAnimation:a.get("layoutAnimation"),shuffle:!1,shape:a.get("shape")});function H(y){var M=y.detail.item;y.detail.drawn&&a.layoutInstance.ondraw&&(y.detail.drawn.gx+=i.x/T,y.detail.drawn.gy+=i.y/T,a.layoutInstance.ondraw(M[0],M[1],M[2],y.detail.drawn))}d.addEventListener("wordclouddrawn",H),a.layoutInstance&&a.layoutInstance.dispose(),a.layoutInstance={ondraw:null,dispose:function(){d.removeEventListener("wordclouddrawn",H),d.addEventListener("wordclouddrawn",function(y){y.preventDefault()})}}})});ce(function(u){var r=(u||{}).series;!de(r)&&(r=r?[r]:[]);var a=["shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];Mt(r,function(t){if(t&&t.type==="wordCloud"){var f=t.textStyle||{};i(f.normal),i(f.emphasis)}});function i(t){t&&Mt(a,function(f){t.hasOwnProperty(f)&&(t["text"+he(f)]=t[f])})}});function De(u,r){var a=u.width,i=u.height;a>i*r?(u.x+=(a-i*r)/2,u.width=i*r):(u.y+=(i-a/r)/2,u.height=a/r)}const Ie=ot({__name:"popular-author",setup(u){const{loading:r,setLoading:a}=dt(),i=G(null);let t=null;function f(n){try{return/[\u4e00-\u9fa5]/.test(n)?n:JSON.parse(`"${n}"`)}catch{return n}}const c=()=>{t&&t.resize()},o=n=>{if(!i.value){console.error("\u56FE\u8868\u5BB9\u5668\u4E0D\u5B58\u5728");return}if(!n||n.length===0){console.error("\u5173\u952E\u8BCD\u6570\u636E\u4E3A\u7A7A");return}console.log("\u5F00\u59CB\u6E32\u67D3\u8BCD\u4E91\u56FE\uFF0C\u5173\u952E\u8BCD\u6570\u91CF:",n.length),t||(console.log("\u521D\u59CB\u5316echarts\u5B9E\u4F8B"),t=ve(i.value));const L=n.map(g=>({name:f(g.keyword),value:g.frequency})).sort((g,T)=>T.value-g.value).slice(0,100);console.log("\u6392\u5E8F\u540E\u524D70\u4E2A\u5173\u952E\u8BCD:",L);const E={tooltip:{show:!0,formatter(g){return`${g.name}: ${g.value}`}},series:[{type:"wordCloud",shape:"circle",left:"center",top:"center",width:"70%",height:"70%",right:null,bottom:null,sizeRange:[12,40],rotationRange:[-30,30],rotationStep:15,gridSize:10,drawOutOfBound:!1,layoutAnimation:!0,textStyle:{fontFamily:"sans-serif",fontWeight:"bold",color(){return`rgb(${[Math.round(Math.random()*160+50),Math.round(Math.random()*160+50),Math.round(Math.random()*160+50)].join(",")})`}},emphasis:{textStyle:{shadowBlur:10,shadowColor:"#333"}},data:L}]};console.log("\u8BBE\u7F6Eecharts\u9009\u9879");try{t.setOption(E),console.log("\u8BCD\u4E91\u56FE\u6E32\u67D3\u5B8C\u6210")}catch(g){console.error("\u8BCD\u4E91\u56FE\u6E32\u67D3\u5931\u8D25:",g)}},d=async()=>{try{a(!0),console.log("\u5F00\u59CB\u83B7\u53D6\u5173\u952E\u8BCD\u6570\u636E");const n=await ae();n&&n.code===2e4&&Array.isArray(n.data)?(console.log("\u83B7\u53D6\u5230\u7684\u5173\u952E\u8BCD\u6570\u636E:",n.data),o(n.data)):n.data&&n.data.code===2e4&&Array.isArray(n.data.data)?(console.log("\u83B7\u53D6\u5230\u7684\u5173\u952E\u8BCD\u6570\u636E:",n.data.data),o(n.data.data)):console.error("\u5173\u952E\u8BCD\u6570\u636E\u683C\u5F0F\u4E0D\u6B63\u786E:",n)}catch(n){console.error("\u83B7\u53D6\u5173\u952E\u8BCD\u6570\u636E\u51FA\u9519",n)}finally{a(!1)}};return Zt(()=>{console.log("\u7EC4\u4EF6\u6302\u8F7D\u5B8C\u6210"),setTimeout(()=>{if(i.value){if(console.log("\u56FE\u8868\u5BB9\u5668\u5C3A\u5BF8:",i.value.offsetWidth,i.value.offsetHeight),console.log("echarts\u7248\u672C:",ge),typeof me=="function")try{(!Dt||!Dt("wordCloud"))&&console.log("\u5C1D\u8BD5\u624B\u52A8\u6CE8\u518CwordCloud\u7EC4\u4EF6")}catch(n){console.error("\u6CE8\u518CwordCloud\u7EC4\u4EF6\u5931\u8D25:",n)}}else console.error("\u56FE\u8868\u5BB9\u5668\u4E0D\u5B58\u5728");d()},500),window.addEventListener("resize",c)}),Ut(()=>{t&&(t.dispose(),t=null),window.removeEventListener("resize",c)}),(n,I)=>{const L=kt,E=lt,g=ft;return j(),at(g,{loading:N(r),style:{width:"100%"}},{default:F(()=>[C(E,{class:"general-card","header-style":{paddingBottom:"14px"}},{title:F(()=>[K(J(n.$t("dataAnalysis.popularAuthor")),1)]),extra:F(()=>[C(L,null,{default:F(()=>[K(J(n.$t("workplace.viewMore")),1)]),_:1})]),default:F(()=>[Z("div",{ref_key:"chartRef",ref:i,class:"wordcloud-container"},null,512)]),_:1})]),_:1},8,["loading"])}}});const Be=ct(Ie,[["__scopeId","data-v-b4a80f7e"]]),ke={class:"container"},Oe={class:"space-unit"},Le={name:"DataAnalysis"},ze=ot({...Le,setup(u){return(r,a)=>{const i=ht("Breadcrumb"),t=It,f=Bt,c=Kt;return j(),jt("div",ke,[C(i,{items:["menu.visualization","menu.visualization.dataAnalysis"]}),C(c,{direction:"vertical",size:12,fill:""},{default:F(()=>[C(c,{direction:"vertical",size:16,fill:""},{default:F(()=>[Z("div",Oe,[C(Ee)]),Z("div",null,[C(f,{cols:24,"col-gap":16,"row-gap":16},{default:F(()=>[C(t,{span:{xs:24,sm:24,md:24,lg:24,xl:12,xxl:12}},{default:F(()=>[C(Fe)]),_:1}),C(t,{span:{xs:24,sm:24,md:24,lg:24,xl:12,xxl:12}},{default:F(()=>[C(Be)]),_:1})]),_:1})]),Z("div",null,[C(be)])]),_:1})]),_:1})])}}});const oa=ct(ze,[["__scopeId","data-v-b6677ae6"]]);export{oa as default};
